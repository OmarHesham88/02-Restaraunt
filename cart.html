<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <title>Novella Caffe</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap RTL -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css"
      rel="stylesheet"
    />

    
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      rel="stylesheet"
    />
<!-- Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="css/bootstrap-icons.css" rel="stylesheet" />
    <link href="css/tooplate-crispy-kitchen.css" rel="stylesheet" />

    <!-- Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Cairo", sans-serif;
        background: #f8f9fa;
      }

      .cart-page {
        margin-top: 6rem;
      }

      .cart-card {
        background: #fff;
        border-radius: 16px;
        padding: 22px;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(0, 0, 0, 0.06);
      }

      .cart-item {
        padding: 16px 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }

      .cart-item:last-child {
        border-bottom: none;
      }

      .cart-item-grid {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 14px;
        align-items: center;
      }

      .cart-item-name {
        font-size: 1.25rem;
        font-weight: 800;
        line-height: 1.25;
        overflow-wrap: anywhere;
      }

      .cart-item-info {
        min-width: 0;
      }

      .cart-item-meta {
        color: #6c757d;
        font-size: 0.95rem;
        margin-top: 6px;
        text-align: right;
        display: inline-flex;
        align-items: baseline;
        gap: 8px;
        flex-wrap: wrap;
      }

      .item-line-total {
        font-weight: 800;
        color: #212529;
      }

      .item-eq {
        font-weight: 500;
        color: rgba(108, 117, 125, 0.95);
      }

      .cart-item-controls {
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }

      .qty-stepper {
        display: inline-flex;
        align-items: center;
        height: 42px;
        border: 1px solid rgba(0, 0, 0, 0.18);
        border-radius: 12px;
        overflow: hidden;
        background: #fff;
      }

      .qty-btn {
        width: 42px;
        height: 42px;
        border: 0;
        background: transparent;
        display: grid;
        place-items: center;
        color: #495057;
        cursor: pointer;
      }

      .qty-btn:hover {
        background: rgba(0, 0, 0, 0.04);
      }

      .qty-btn:active {
        background: rgba(0, 0, 0, 0.07);
      }

      .qty-btn i {
        font-size: 1.05rem;
      }

      .qty-value {
        min-width: 38px;
        text-align: center;
        font-weight: 800;
        color: #212529;
        padding: 0 8px;
        border-inline: 1px solid rgba(0, 0, 0, 0.12);
        background: rgba(0, 0, 0, 0.02);
      }

      .remove-btn {
        width: 42px;
        height: 42px;
        border-radius: 12px;
        border: 1px solid rgba(220, 53, 69, 0.35);
        background: rgba(220, 53, 69, 0.06);
        color: #dc3545;
        display: grid;
        place-items: center;
        cursor: pointer;
      }

      .remove-btn:hover {
        background: rgba(220, 53, 69, 0.1);
        border-color: rgba(220, 53, 69, 0.5);
      }

      .remove-btn i {
        font-size: 1.1rem;
      }

      .qty-btn:focus-visible,
      .remove-btn:focus-visible {
        outline: 3px solid rgba(244, 71, 73, 0.35);
        outline-offset: 2px;
      }

      .cart-summary {
        border-top: 1px solid rgba(0, 0, 0, 0.08);
        margin-top: 18px;
        padding-top: 18px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
      }

      .total-box {
        font-size: 1.75rem;
        font-weight: 900;
        white-space: nowrap;
      }

      .total-box .total-money {
        display: inline-block;
        direction: ltr;
        unicode-bidi: isolate;
      }

      .cart-page-title {
        font-size: clamp(1.9rem, 4vw, 3rem);
        font-weight: 900;
      }

      .cart-checkout-btn {
        font-size: 1.2rem;
        font-weight: 800;
        padding: 0.75rem 1.2rem;
        border-radius: 14px;
      }

      @media (max-width: 575.98px) {
        .cart-card {
          padding: 18px;
        }

        .total-box {
          font-size: 1.45rem;
        }

        .cart-checkout-btn {
          width: 100%;
        }
      }

      /* Very small screens: stack controls under the item text */
      @media (max-width: 399.98px) {
        .cart-item-grid {
          grid-template-columns: 1fr;
        }

        .cart-item-controls {
          width: 100%;
          justify-content: flex-start;
        }

        .cart-item-meta {
          flex-direction: column;
          align-items: flex-end;
          gap: 2px;
        }
      }
    </style>
  </head>

  <body class="has-fixed-navbar">
    <nav class="navbar navbar-expand-lg bg-white shadow-lg fixed-top">
      <div class="container">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <a class="navbar-brand" href="index.html">
          <!-- <div class="cart-wrapper position-relative me-3 cart-res">
            <a href="cart.html" class="cart-btn">
              <i class="bi-cart3"></i>

              <span id="cart-count">0</span>
            </a>
          </div> -->
          <img
            src="images/header-logo.png"
            class="logo-img"
            alt="Crispy Kitchen"
            height="40"
          />
        </a>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="menu.html">المنيو</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="breakfast.html">الفطور الصباحى</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="flowers.html">الورد</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="flowers-products.html">منتجات الورد</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="about.html">من نحن</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="events-news.html">الفعاليات والأخبار</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="gallery.html">معرض الصور</a>
            </li>
          </ul>
        </div>

        <div class="cart-wrapper position-relative me-3">
          <a href="cart.html" class="cart-btn">
            <i class="bi-cart3"></i>

            <span id="cart-count">0</span>
          </a>
        </div>
      </div>
    </nav>
    <div class="container py-5 cart-page">
      <h2 class="mb-4 text-center cart-page-title">
        <i class="bi-cart3"></i>
        عربة التسوق
      </h2>

      <div class="cart-card">
        <div id="cart-items"></div>

        <div class="cart-summary">
          <div class="total-box">
            الإجمالي:
            <span class="total-money">$<span id="total-price">0.00</span></span>
          </div>

          <a class="btn btn-danger cart-checkout-btn" href="payment.html"
            >إتمام الطلب</a
          >
        </div>
      </div>
    </div>
    <footer class="site-footer section-padding">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <img
              src="images/footer-logo.png"
              alt="Crispy Kitchen"
              height="40"
              class="mb-4 me-5"
            />
          </div>

          <div class="col-lg-4 col-md-7 col-xs-12 tooplate-mt30">
            <h6 class="text-white mb-lg-4 mb-3">العنوان</h6>

            <p>العنوان الكامل للطعام والمشروبات</p>

            <a
              href="https://goo.gl/maps/wZVGLA7q64uC1s886"
              class="custom-btn btn btn-dark mt-2"
              >عرض الموقع على الخريطة</a
            >
          </div>

          <div class="col-lg-4 col-md-5 col-xs-12 tooplate-mt30">
            <h6 class="text-white mb-lg-4 mb-3">الساعات</h6>

            <p class="mb-2">السبت - الخميس: 10:00 صباحاً - 10:00 مساءً</p>

            <p>الجمعة: 10:00 صباحاً - 12:00 مساءً</p>
            <p>
              الهاتف:
              <a href="tel: 010-02-0340" class="tel-link">010-02-0340</a>
            </p>
          </div>

          <div class="col-lg-4 col-md-6 col-xs-12 tooplate-mt30">
            <h6 class="text-white mb-lg-4 mb-3">
              <a
                href="contact.html"
                class="text-white text-decoration-none d-inline-flex align-items-center gap-2"
                aria-label="الانتقال إلى صفحة التواصل معنا"
              >
                للتواصل معنا
                <i class="bi-arrow-left-short" aria-hidden="true"></i>
              </a>
            </h6>

            <p class="mb-3" style="color: rgba(255, 255, 255, 0.75)">
              يسعدنا استقبال رسائلك واستفساراتك.
            </p>

            <a href="contact.html" class="custom-btn btn btn-dark mb-4"
              >تواصل الآن</a
            >

            <ul class="social-icon">
              <li>
                <a href="#" class="social-icon-link" aria-label="Snapchat">
                  <i class="fa-brands fa-snapchat"></i>
                </a>
              </li>

              <li>
                <a href="#" class="social-icon-link" aria-label="TikTok">
                  <i class="fa-brands fa-tiktok"></i>
                </a>
              </li>

              <li>
                <a href="#" class="social-icon-link" aria-label="Instagram">
                  <i class="fa-brands fa-instagram"></i>
                </a>
              </li>

              <li>
                <a
                  href="https://twitter.com/search?q=tooplate.com&src=typed_query&f=live"
                  target="_blank"
                  class="social-icon-link"
                  aria-label="X"
                >
                  <i class="fa-brands fa-x-twitter"></i>
                </a>
              </li>

              <li>
                <a href="#" class="social-icon-link" aria-label="Facebook">
                  <i class="fa-brands fa-facebook-f"></i>
                </a>
              </li>

              <li>
                <a href="#" class="social-icon-link" aria-label="YouTube">
                  <i class="fa-brands fa-youtube"></i>
                </a>
              </li>
            </ul>

            <p class="copyright-text tooplate-mt60">
              جميع الحقوق محفوظة لـ Novella 2026, Ltd.
              <br />Design:
              <a rel="nofollow" href="https://www.tooplate.com/" target="_blank"
                >Tooplate</a
              >
            </p>
          </div>
        </div>
      </div>
    </footer>
    <script>
      function normalizeCart(items) {
        if (!Array.isArray(items)) return [];
        return items
          .filter((item) => item && typeof item === "object")
          .map((item) => ({
            ...item,
            name: item.name ? String(item.name) : "منتج",
            price: Number(item.price) || 0,
            quantity: Math.max(1, Number(item.quantity) || 1),
          }));
      }

      function escapeHtml(str) {
        return String(str).replace(/[&<>"']/g, (ch) => {
          const map = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
          };
          return map[ch] || ch;
        });
      }

      let cart = normalizeCart(JSON.parse(localStorage.getItem("cart")) || []);
      let cartItemsEl = document.getElementById("cart-items");
      let totalEl = document.getElementById("total-price");
      let checkoutBtnEl = document.querySelector(".cart-checkout-btn");

      cartItemsEl.addEventListener("click", function (e) {
        const btn = e.target.closest("[data-action][data-index]");
        if (!btn) return;

        const index = Number(btn.getAttribute("data-index"));
        const action = btn.getAttribute("data-action");

        if (!Number.isFinite(index)) return;

        if (action === "increase") increaseQty(index);
        if (action === "decrease") decreaseQty(index);
        if (action === "remove") removeItem(index);
      });

      function renderCart() {
        cartItemsEl.innerHTML = "";
        let total = 0;

        if (cart.length === 0) {
          cartItemsEl.innerHTML = `
                <div class="text-center text-muted py-5">
                  <i class="bi-cart3" style="font-size: 2.2rem; color: rgba(0,0,0,.35)"></i>
                  <p class="mb-3 mt-3">العربة فارغة</p>
                  <a class="btn btn-outline-dark" href="menu.html">ابدأ التسوق</a>
                </div>
            `;
          totalEl.textContent = "0.00";

          if (checkoutBtnEl) {
            checkoutBtnEl.classList.add("disabled");
            checkoutBtnEl.setAttribute("aria-disabled", "true");
            checkoutBtnEl.setAttribute("tabindex", "-1");
          }
          return;
        }

        if (checkoutBtnEl) {
          checkoutBtnEl.classList.remove("disabled");
          checkoutBtnEl.removeAttribute("aria-disabled");
          checkoutBtnEl.removeAttribute("tabindex");
        }

        let html = "";

        cart.forEach((item, index) => {
          const unitPrice = Number(item.price) || 0;
          const qty = Math.max(1, Number(item.quantity) || 1);
          let itemTotal = unitPrice * qty;
          total += itemTotal;

          html += `
                <div class="cart-item">
                  <div class="cart-item-grid">
                    <div class="cart-item-info">
                      <div class="cart-item-name">${escapeHtml(item.name)}</div>
                      <div class="cart-item-meta" dir="ltr">
                        <span class="item-line-total">$${itemTotal.toFixed(
                          2
                        )}</span>
                        <span class="item-eq">= $${unitPrice.toFixed(2)} × ${qty}</span>
                      </div>
                    </div>

                    <div class="cart-item-controls">
                      <div class="qty-stepper" aria-label="الكمية">
                        <button
                          type="button"
                          class="qty-btn"
                          data-action="decrease"
                          data-index="${index}"
                          aria-label="تقليل الكمية"
                        >
                          <i class="bi-dash-lg" aria-hidden="true"></i>
                        </button>

                        <span class="qty-value" aria-label="الكمية الحالية"
                          >${qty}</span
                        >

                        <button
                          type="button"
                          class="qty-btn"
                          data-action="increase"
                          data-index="${index}"
                          aria-label="زيادة الكمية"
                        >
                          <i class="bi-plus-lg" aria-hidden="true"></i>
                        </button>
                      </div>

                      <button
                        type="button"
                        class="remove-btn"
                        data-action="remove"
                        data-index="${index}"
                        aria-label="إزالة العنصر"
                      >
                        <i class="bi-trash" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                </div>
            `;
        });

        cartItemsEl.innerHTML = html;
        totalEl.textContent = total.toFixed(2);
      }

      function increaseQty(index) {
        if (!cart[index]) return;
        cart[index].quantity = (Number(cart[index].quantity) || 0) + 1;
        saveCart();
      }

      function decreaseQty(index) {
        if (!cart[index]) return;

        const current = Number(cart[index].quantity) || 0;

        if (current > 1) {
          cart[index].quantity = current - 1;
        } else {
          cart.splice(index, 1);
        }
        saveCart();
      }

      function removeItem(index) {
        if (!cart[index]) return;
        cart.splice(index, 1);
        saveCart();
      }

      function saveCart() {
        cart = normalizeCart(cart);
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
        updateNavbarCount();
      }

      function updateNavbarCount() {
        let totalQty = cart.reduce(
          (sum, item) => sum + (Number(item.quantity) || 0),
          0
        );
        let countEl = document.getElementById("cart-count");
        if (countEl) {
          countEl.innerText = totalQty;
          countEl.style.display = totalQty > 0 ? "inline-block" : "none";
        }
      }

      renderCart();
      updateNavbarCount();
    </script>
    <script src="js/bootstrap.bundle.min.js"></script>
  </body>
</html>

