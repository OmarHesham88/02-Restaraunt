<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>متابعة الدفع - Crispy Kitchen</title>

    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css"
      rel="stylesheet"
    />

    <link href="css/bootstrap-icons.css" rel="stylesheet" />

    <link href="css/tooplate-crispy-kitchen.css" rel="stylesheet" />

    <style>
      .payment-card {
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.08);
        padding: 28px;
      }

      .payment-summary {
        background: #fff7f7;
        border-radius: 14px;
        padding: 20px;
        border: 1px solid #f1dcdc;
      }

      .map-placeholder {
        background: #f5f5f5;
        border-radius: 12px;
        height: 220px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #777;
        border: 1px dashed #d9d9d9;
      }
    </style>
  </head>

  <body class="has-fixed-navbar">
    <nav class="navbar navbar-expand-lg bg-white shadow-lg fixed-top">
      <div class="container">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <a class="navbar-brand" href="index.html">
          <img src="images/header-logo.png" alt="Crispy Kitchen" height="40" />
        </a>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="menu.html">المنيو</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="breakfast.html">الفطور الصباحى</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="flowers.html">الورد</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="flowers-products.html">منتجات الورد</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="contact.html">تواصل معنا</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="about.html">من نحن</a>
            </li>
          </ul>
        </div>

        <div class="cart-wrapper position-relative me-3">
          <a href="cart.html" class="cart-btn">
            <i class="bi-cart3"></i>

            <span id="cart-count">0</span>
          </a>
        </div>
      </div>
    </nav>

    <main class="section-padding">
      <div class="container">
        <div class="row g-4">
          <div class="col-lg-7 col-12">
            <div class="payment-card">
              <h2 class="mb-4">متابعة الدفع</h2>

              <div class="row g-3">
                <div class="col-md-6 col-12">
                  <label class="form-label" for="full-name">الاسم كاملاً</label>
                  <input
                    type="text"
                    class="form-control"
                    id="full-name"
                    placeholder="ادخل اسمك الكامل"
                  />
                </div>
                <div class="col-md-6 col-12">
                  <label class="form-label" for="phone">الجوال</label>
                  <input
                    type="tel"
                    class="form-control"
                    id="phone"
                    placeholder="05xxxxxxxx"
                  />
                </div>
                <div class="col-md-6 col-12">
                  <label class="form-label" for="email"
                    >البريد الإلكتروني</label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    placeholder="example@email.com"
                  />
                </div>
                <div class="col-md-6 col-12">
                  <label class="form-label" for="area">منطقة التوصيل</label>
                  <select class="form-select" id="area">
                    <option selected>اختر المنطقة</option>
                    <option>شمال الرياض</option>
                    <option>شرق الرياض</option>
                    <option>جنوب الرياض</option>
                    <option>غربي الرياض</option>
                  </select>
                </div>
                <div class="col-12">
                  <label class="form-label" for="address"
                    >عنوان التوصيل كتلة نصية</label
                  >
                  <textarea
                    class="form-control"
                    id="address"
                    rows="3"
                    placeholder="Ø§ÙƒØªØ¨ Ø¹Ù†ÙˆØ§Ù†Ùƒ Ø¨Ø§Ù„ØªÙØµÙŠÙ„"
                  ></textarea>
                </div>
                <div class="col-12">
                  <label class="form-label"
                    >تحديد موقع التوصيل على الخريطة</label
                  >
                  <div class="map-placeholder">سيتم وضع خريطة التوصيل هنا</div>
                </div>
              </div>

              <hr class="my-4" />

              <h5 class="mb-3">طريقة الدفع</h5>
              <div class="form-check mb-2">
                <input
                  class="form-check-input"
                  type="radio"
                  name="payment"
                  id="pay-visa"
                  checked
                />
                <label class="form-check-label" for="pay-visa">فيزا</label>
              </div>
              <div class="form-check mb-3">
                <input
                  class="form-check-input"
                  type="radio"
                  name="payment"
                  id="pay-cod"
                />
                <label class="form-check-label" for="pay-cod"
                  >الدفع عند الاستلام</label
                >
              </div>

              <button class="btn btn-danger w-100">إتمام الدفع</button>
            </div>
          </div>

          <div class="col-lg-5 col-12">
            <div class="payment-summary">
              <h5 class="mb-3">ملخص الطلب</h5>
              <div class="d-flex justify-content-between mb-2">
                <span>إجمالي الطلب</span>
                <span id="subtotal">0</span>
              </div>
              <div class="d-flex justify-content-between mb-2">
                <span>تكاليف الشحن</span>
                <span id="shipping">20</span>
              </div>
              <hr />
              <div class="d-flex justify-content-between fw-bold">
                <span>إجمالي الطلب</span>
                <span id="grand-total">0</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- JAVASCRIPT FILES -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/custom.js"></script>
    <script>
      function getCart() {
        return JSON.parse(localStorage.getItem("cart")) || [];
      }

      function updateCartCount() {
        let cart = getCart();
        let totalQty = cart.reduce((sum, item) => {
          return sum + (item.quantity || 1);
        }, 0);

        let countEl = document.getElementById("cart-count");
        if (countEl) {
          if (totalQty > 0) {
            countEl.innerText = totalQty;
            countEl.style.display = "inline-block";
          } else {
            countEl.style.display = "none";
          }
        }
      }

      function updateTotals() {
        let cart = getCart();
        let subtotal = cart.reduce((sum, item) => {
          return sum + (item.price || 0) * (item.quantity || 1);
        }, 0);
        let shipping = 20;
        let grand = subtotal + shipping;

        document.getElementById("subtotal").textContent = subtotal.toFixed(2);
        document.getElementById("shipping").textContent = shipping.toFixed(2);
        document.getElementById("grand-total").textContent = grand.toFixed(2);
      }

      document.addEventListener("DOMContentLoaded", function () {
        updateCartCount();
        updateTotals();
      });
    </script>
  </body>
</html>
